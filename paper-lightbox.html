
<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-icons/iron-icons.html"/>
<link rel="import" href="../iron-ajax/iron-ajax.html"/>
<dom-module id="paper-lightbox">
  <template>
    <style>:host{display:block}:host::content .paper-lightbox-popup{position:fixed;top:0;right:0;bottom:0;left:0;z-index:999}:host::content .paper-lightbox-popup_overlay{position:absolute;background-color:#000;width:100%;height:100%;opacity:.6;z-index:0}:host::content .paper-lightbox-popup_window{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);padding:20px 25px;z-index:1;background-color:#fff;box-sizing:border-box}:host::content .paper-lightbox-popup_window-image img{vertical-align:top;max-width:100%}:host::content .paper-lightbox-popup_close{position:absolute;left:0;top:0;width:18px;height:18px;padding:8px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#fff;border-radius:100px;cursor:pointer;-webkit-filter:drop-shadow(0 1px 2px rgba(0, 0, 0, .4));filter:drop-shadow(0 1px 2px rgba(0, 0, 0, .4))}</style>
    <template is="dom-if" if="{{ _isAjax() }}">
      <iron-ajax auto="auto" url="{{ src }}" handle-as="text" on-response="_ajaxResponse"></iron-ajax>
    </template>
    <button>
      <content></content>
    </button>
  </template>
  <script>(function(){Polymer({is:"paper-lightbox",_createPopup:function(){var t,e,i,n;return i=this,e=document.createElement("div"),e.classList.add("paper-lightbox-popup"),t=document.createElement("iron-icon"),t.classList.add("paper-lightbox-popup_close"),t.setAttribute("icon","icons:close"),i.window=document.createElement("div"),i.window.classList.add("paper-lightbox-popup_window"),i.window.appendChild(t),e.appendChild(i.window),n=document.createElement("div"),n.classList.add("paper-lightbox-popup_overlay"),e.appendChild(n),i.appendChild(e)},_openAnimation:function(){var t,e,i,n;return e=this,i=e.querySelector(".paper-lightbox-popup_overlay"),n=e.window.getBoundingClientRect(),t=e.querySelector("button").getBoundingClientRect(),e.window.style.top=t.top+"px",e.window.style.width=t.width+"px",e.window.style.height=t.height+"px",e.window.style.left=t.left+"px",e.window.style.padding="0",e.window.style.transform="none",i.style.opacity="0",[].forEach.call(e.window.children,function(t,e){return t.style.opacity="0"}),setTimeout(function(){return e.window.style.transition="all 0.3s cubic-bezier(.55,0,.1,1)",e.window.style.top=n.top+"px",e.window.style.width=n.width+"px",e.window.style.height=n.height+"px",e.window.style.left=n.left+"px",e.window.style.padding="",i.style.transition="all 0.3s cubic-bezier(.55,0,.1,1)",i.style.opacity="0.6",[].forEach.call(e.window.children,function(t,e){return t.style.transition="opacity 0.3s cubic-bezier(.55,0,.1,1)"})},0),setTimeout(function(){return e.window.style.transition="",e.window.style.top="",e.window.style.width="",e.window.style.height="",e.window.style.left="",e.window.style.transform="",i.style.opacity="",[].forEach.call(e.window.children,function(t,e){return t.style.opacity="1"})},300),setTimeout(function(){return[].forEach.call(e.window.children,function(t,e){return t.style.opacity="",t.style.transition=""})},600)},_closeAnimation:function(t){var e,i,n,o;return i=this,n=i.querySelector(".paper-lightbox-popup_overlay"),o=i.window.getBoundingClientRect(),e=i.querySelector("button").getBoundingClientRect(),i.window.style.top=o.top+"px",i.window.style.width=o.width+"px",i.window.style.height=o.height+"px",i.window.style.left=o.left+"px",i.window.style.transform="none",n.style.opacity="0.6",[].forEach.call(i.window.children,function(t,e){return t.style.transition="opacity 0.15s cubic-bezier(.55,0,.1,1)",t.style.opacity="0"}),setTimeout(function(){return i.window.style.transition="all 0.3s cubic-bezier(.55,0,.1,1)",i.window.style.top=e.top+"px",i.window.style.width=e.width+"px",i.window.style.height=e.height+"px",i.window.style.left=e.left+"px",i.window.style.padding="0",i.window.style.opacity="0",n.style.transition="all 0.3s cubic-bezier(.55,0,.1,1)",n.style.opacity="0"},0),setTimeout(function(){return t.remove()},300)},_isAjax:function(){var t;if(t=this,"ajax"===this._getType())return!0},_parseAjax:function(t){var e,i;return i=this,e=document.createElement("div"),e.innerHTML=t,[].forEach.call(e.children,function(t,e){return i.window.appendChild(t)})},_ajaxResponse:function(t){var e;return e=this,e.ajaxResponse=t.target.lastResponse},_createAjax:function(){var t;return t=this,this._createPopup(),this._parseAjax(t.ajaxResponse),t.window.classList.add("paper-lightbox-popup_window-ajax"),this._openAnimation(),this._closePopup()},_createImage:function(){var t,e;return e=this,t=new Image,t.onload=function(){return e._createPopup(),e.window.classList.add("paper-lightbox-popup_window-image"),e.window.appendChild(t),e._openAnimation(),e._closePopup()},t.src=e.getAttribute("src")},_createInline:function(){var t,e;return e=this,t=document.querySelector(e.getAttribute("src")),this._createPopup(),e.window.classList.add("paper-lightbox-popup_window-inline"),e.window.appendChild(t.cloneNode(!0)),this._openAnimation(),this._closePopup()},_getType:function(){var t;return t=this,t.getAttribute("type")},_launchPopup:function(){var t;switch(t=this,this._getType()){case"ajax":return t.listen(t.$$("button"),"tap","_createAjax");case"image":return t.listen(t.$$("button"),"tap","_createImage");case"inline":return t.listen(t.$$("button"),"tap","_createInline");case"iframe":return console.log()}},_removePopup:function(){var t,e;return t=this,e=t.querySelector(".paper-lightbox-popup"),this._closeAnimation(e)},_closePopup:function(){var t,e,i;return e=this,i=e.querySelector(".paper-lightbox-popup_overlay"),t=e.querySelector(".paper-lightbox-popup_close"),e.listen(i,"tap","_removePopup"),e.listen(t,"tap","_removePopup")},onAjaxContentLoaded:function(){},ready:function(){return this._launchPopup()}})}).call(this);</script>
</dom-module>