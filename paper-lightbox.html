
<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-icons/iron-icons.html"/>
<link rel="import" href="../iron-ajax/iron-ajax.html"/>
<dom-module id="paper-lightbox">
  <template>
    <style>:host{display:block}:host::content .paper-lightbox-popup{position:fixed;top:0;right:0;bottom:0;left:0;z-index:999}:host::content .paper-lightbox-popup_overlay{position:absolute;background-color:#000;width:100%;height:100%;opacity:.6;z-index:0}:host::content .paper-lightbox-popup_window{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);padding:20px 25px;z-index:1;background-color:#fff}:host::content .paper-lightbox-popup_close{position:absolute;left:0;top:0;width:18px;height:18px;padding:8px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#fff;border-radius:100px;cursor:pointer;-webkit-filter:drop-shadow(0 1px 2px rgba(0, 0, 0, .4));filter:drop-shadow(0 1px 2px rgba(0, 0, 0, .4))}</style>
    <template is="dom-if" if="{{ _isAjax() }}">
      <iron-ajax auto="auto" url="{{ src }}" handle-as="text" on-response="_ajaxResponse"></iron-ajax>
    </template>
    <button>
      <content></content>
    </button>
  </template>
  <script>(function(){Polymer({is:"paper-lightbox",_createPopup:function(){var e,t,n,r;return n=this,t=document.createElement("div"),t.classList.add("paper-lightbox-popup"),e=document.createElement("iron-icon"),e.classList.add("paper-lightbox-popup_close"),e.setAttribute("icon","icons:close"),n.window=document.createElement("div"),n.window.classList.add("paper-lightbox-popup_window"),n.window.appendChild(e),t.appendChild(n.window),r=document.createElement("div"),r.classList.add("paper-lightbox-popup_overlay"),t.appendChild(r),n.appendChild(t)},_isAjax:function(){var e;if(e=this,"ajax"===this._getType())return!0},_parseAjax:function(e){var t,n;return n=this,t=document.createElement("div"),t.innerHTML=e,[].forEach.call(t.children,function(e,t){return n.window.appendChild(e)})},_ajaxResponse:function(e){var t;return t=this,t.ajaxResponse=e.target.lastResponse},_createAjax:function(){var e;return e=this,this._createPopup(),this._parseAjax(e.ajaxResponse),this._closePopup()},_createImage:function(){var e,t;return t=this,e=new Image,this._createPopup(),e.onload=function(){return t.window.appendChild(e)},e.src=t.getAttribute("src"),this._closePopup()},_createInline:function(){var e,t;return t=this,e=document.querySelector(t.getAttribute("src")),this._createPopup(),t.window.appendChild(e.cloneNode(!0)),this._closePopup()},_getType:function(){var e;return e=this,e.getAttribute("type")},_launchPopup:function(){var e;switch(e=this,this._getType()){case"ajax":return e.listen(e.$$("button"),"tap","_createAjax");case"image":return e.listen(e.$$("button"),"tap","_createImage");case"inline":return e.listen(e.$$("button"),"tap","_createInline");case"iframe":return console.log()}},_removePopup:function(){var e,t;return e=this,t=e.querySelector(".paper-lightbox-popup"),t.remove()},_closePopup:function(){var e,t,n;return t=this,n=t.querySelector(".paper-lightbox-popup_overlay"),e=t.querySelector(".paper-lightbox-popup_close"),t.listen(n,"tap","_removePopup"),t.listen(e,"tap","_removePopup")},onAjaxContentLoaded:function(){},ready:function(){return this._launchPopup()}})}).call(this);</script>
</dom-module>